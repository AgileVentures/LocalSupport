---
:scope: 
:url: https://do-it.org/partials/organisation-card.html
:body: ''
:status: 200
:method: get
:headers:
  Accept-Ranges: bytes
  Content-Type: text/html
  Date: Sat, 06 Feb 2016 12:03:38 GMT
  ETag: '"569c1749-b28"'
  Last-Modified: Sun, 17 Jan 2016 22:35:53 GMT
  Server: nginx/1.4.6 (Ubuntu)
  Strict-Transport-Security: max-age=31536000
  Content-Length: '2856'
  Connection: close
:content: |
  <div class="organisation-card" ng-class="{'has-image' : model.logos.length, 'is-wide' : wide, 'detail-view': detailView }">
      <div class="main">
          <img class="logo" ng-if="model.logo.length" ng-src="{{model.logo[1].absolute_url}}" alt="{{model.name}}" />
          <img class="logo" ng-if="!model.logo.length" src ng-src="{{ 'stock-logo' | translate }}" alt="{{model.name}}" />
          <a href="#/organisations/{{model.slug}}">
              <h3 class="h4" ng-if="!isTall">{{ model.name }}</h3>
              <h3 class="h4" ng-if="isTall" doit-ellipsis ng-bind="model.name"></h3>
          </a>

          <!-- Details -->
          <div ng-if="detailView" class="details">
              <!-- Detail: contact -->
              <span class="article-paragraph">{{ model.phone }}</span>
              <div class="article-paragraph">{{ model.email }}</div>

              <!-- Details: location -->
              <hr />
              <address class="article-paragraph">
                  {{ model.address_1 }}<br ng-if="model.address_1">
                  {{ model.address_2 }}<br ng-if="model.address_2">
                  {{ model.city }}<br ng-if="model.city">
                  {{ model.county }}<br ng-if="model.county">
                  {{ model.postcode }}
              </address>

              <!-- map wrapped with link -->
              <a href ng-href="{{ mapLink }}" ng-if="mapLink">
                  <div doit-map class="map" ng-if="map" data-map-markers="map.markers" data-map-center="map.center" data-options="map.options"></div>
              </a>
              <!-- map without link -->
              <div doit-map class="map" ng-if="map && !mapLink" data-map-markers="map.markers" data-map-center="map.center" data-options="map.options"></div>

          </div>

          <div class="opportunity-wrap">
              <rating class="rating" ng-if="!detailView" ng-model="model.rating" max="3" state-on="'icon icon-rating-black-on'" state-off="'icon icon-rating-black-off'" readonly="'true'"></rating>
              <hr />
              <div ng-if="model.active_opportunities_count">
                  <a href ng-href="#/organisations/{{model.slug}}">{{model.active_opportunities_count}}</a> <span ng-if="model.active_opportunities_count > 1">New opportunities</span><span ng-if="model.active_opportunities_count == 1">New opportunity</span>
              </div>
          </div>

      </div>
      <div class="actions">
          <a href ng-href="#/organisations/{{model.slug}}" class="btn btn-small" ng-if="model.is_user_subscribed == undefined">View</a>
          <a href ng-click="subscribe(model.id)" class="btn btn-small" ng-if="!model.is_user_subscribed && model.is_user_subscribed != undefined">Subscribe</a>
          <a href ng-click="unSubscribe(model.id)" class="btn btn-transparent btn-transparent-black no-icon btn-small" ng-if="model.is_user_subscribed">Un-subscribe</a>
      </div>
  </div>
